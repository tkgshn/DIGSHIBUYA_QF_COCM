# DIGSHIBUYA QF シミュレーション比較アプリケーション

このアプリケーションは、寄付データを分析し、通常のQF（Quadratic Funding）とCOCM QF（Cross-Origin Contribution Matching QF）の比較シミュレーションを行うインタラクティブなツールです。寄付フロー、寄付者クラスタリング、資金配分の可視化を含みます。

## プロジェクト構造

このプロジェクトは単一のHTMLファイルで構成されており、すべてのコードが一つのファイルにまとめられています：

```
/
├── index.html              # メインアプリケーション（HTML, CSS, JavaScript）
├── cocm_network.html       # COCM ネットワーク可視化
├── Contribution.json       # 寄付データ
└── Grants.json             # プロジェクト情報
```

## セットアップと実行方法

このアプリケーションは特別なセットアップを必要とせず、ブラウザで直接実行できます：

1. リポジトリをクローンまたはダウンロードします
2. `index.html` をブラウザで開きます
3. 必要に応じて、ローカルのHTTPサーバーを使用して実行することもできます：
   ```bash
   # Pythonを使用した簡易HTTPサーバーの例
   python -m http.server
   # ブラウザで http://localhost:8000 を開く
   ```

## 機能

- **寄付フロー可視化**：寄付者からプロジェクトへの資金フローをSankey図で表示
- **3Dネットワーク可視化**：寄付者とプロジェクトの関係性を3D空間で表現
- **寄付者クラスタリング**：寄付パターンに基づく寄付者のグループ化（PCA + k-means）
- **QF比較シミュレーション**：
  - 通常QFとCOCM QFの結果を並べて表示
  - プロジェクト別寄付総額とマッチング額（バーチャート）
  - 順位別割り当て総額の配分（ラインチャート）
  - 累積資金配分の公平性（累積曲線）
- **インタラクティブ機能**：
  - マッチングプール額の調整
  - データの再読み込み
  - グラフの拡大・縮小・回転（3Dビュー）

## 技術スタック

- **React 17**（CDN経由でのUMD版）
- **Babel**（ブラウザ内でJSXをトランスパイル）
- **Plotly.js**（データ可視化）
- **numeric.js**（数値計算、PCA実装）
- **インラインCSS**（スタイリング）

## 実装されているアルゴリズム

- **k-meansクラスタリング**：寄付者を寄付パターンに基づいてグループ化
- **PCA（主成分分析）**：高次元の寄付データを2次元に射影して可視化
- **QF（Quadratic Funding）**：寄付額の平方根の合計を二乗する資金配分方式
- **COCM QF**：多様性を重視した拡張QFアルゴリズム

## COCM（Cross-Origin Contribution Matching）について

COCM QFは、通常のQFを拡張し、寄付者の多様性を重視するアルゴリズムです。寄付パターンに基づいて寄付者をクラスタリングし、多様なクラスターから支持を集めるプロジェクトに追加のボーナスを与えます。

主な特徴:
1. **寄付者クラスタリング**：寄付パターンに基づいて寄付者をグループ化
2. **多様性係数**：異なるクラスターからの支持を評価（クラスタ数/最大クラスタ数）
3. **多様性ボーナス**：多様性係数に追加ボーナス（+0.5）を付与
4. **公平な資金配分**：特定のコミュニティだけでなく、幅広いコミュニティから支持されるプロジェクトを優遇

これにより、Sybil攻撃や調整されたグループによる操作を軽減し、より公平な資金配分を実現します。
